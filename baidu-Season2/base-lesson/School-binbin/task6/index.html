<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task 6</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div>
        <div class="left-side">
            <textarea name="" id="content-text" cols="30" rows="10"></textarea>
            <div>【注】多个内容请以分号隔开</div>
        </div>
        <div class="right-side">
            <button id="left-in">左侧入</button><br/>
            <button id="right-in">右侧入</button><br/>
            <button id="left-out">左侧出</button><br/>
            <button id="right-out">右侧出</button><br/>
        </div>
        <div style="clear: both;"></div>
    </div>
    <input class="search" id="search-content" type="search"/><button id="search-btn">查询</button>
    <ul class="queue-list" id="queue">
        <li>1</li>
        <li>23</li>
        <li>48</li>
        <li>799</li>
        <li>760</li>
    </ul>
    <div id="result"></div>
    <script type="text/javascript">
    function splitContent(content){
        if(content.trim() == ""){
            alert("请输入要添加的值");
        }
        var arr = content.split(";");
        return arr;
    }
    function leftIn(){
        var list = document.getElementById("queue");
        var content = document.getElementById("content-text").value;
        var arr = splitContent(content);
        var arr1 = arr.reverse();     
        for(var i=0;i<arr.length;i++){
            var li= document.createElement("li");
            li.innerHTML = arr1[i];
            list.insertBefore(li,list.childNodes[0]);
        }
    }
    function leftOut(){
        var list = document.getElementById("queue");
        var iList = list.getElementsByTagName("li");
        if(iList.length == 0){
            alert("没有可删除的数字了！");
            return;
        }
        var nodeVal = iList[0].innerHTML;
        list.removeChild(iList[0]);
        alert(nodeVal);
    }
    function rightIn(){
        var list = document.getElementById("queue");
        var content = document.getElementById("content-text").value;
        var arr = splitContent(content);
        var arr1 = arr.reverse();     
        for(var i=0;i<arr.length;i++){
            var li= document.createElement("li");
            list.appendChild(li).append(arr1[i]);
        }
        
    }
    function rightOut(){
        var list = document.getElementById("queue");
        var iList = list.getElementsByTagName("li");
        if(iList.length == 0){
            alert("没有可删除的数字了！");
            return;
        }
        var nodeVal = iList[iList.length-1].innerHTML;
        list.removeChild(iList[iList.length-1]);
        alert(nodeVal);
    }
    function searchAndHighlight(){
        var searchKey = document.getElementById("search-content").value;
        var list = document.getElementById("queue").getElementsByTagName("li");
        var k = 0;
        for (var i = 0;i<list.length;i++){
            if(list[i].innerHTML.indexOf(searchKey) != -1){
                k++;
                list[i].style.backgroundColor = "orange";
                //var htmlArr = list[i].innerHTML.split(searchKey);
                // var font = document.createElement("font");
                // font.innerHTML = searchKey;
                // font.setAttribute("style","color:blue");
                // list[i].innerHTML="";
                // list[i].append(htmlArr[0] + "<font style='color:blue;'>" + searchKey + "</font>" + htmlArr[1]);
            }else{
                list[i].style.backgroundColor = "red";
            }
        }
        document.getElementById("result").innerHTML = "共查询到" + k + "个结果.";
        console.log(k);
    }
    document.getElementById("left-in").onclick = leftIn;
    document.getElementById("left-out").onclick = leftOut;
    document.getElementById("right-in").onclick = rightIn;
    document.getElementById("right-out").onclick = rightOut;
    document.getElementById("search-btn").onclick = searchAndHighlight;
    var list = document.getElementById("queue");
    list.onclick = function(e){
        list.removeChild(e.target);
    }
    </script>
</body>
</html>
